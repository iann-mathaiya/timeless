---
import { format } from "date-fns";
import AppLayout from "../layouts/AppLayout.astro";

const { user, session } = Astro.locals;

if (!user) {
	return Astro.redirect("/join");
}
---

<AppLayout title="Profile">
    <section class="px-4 flex flex-col items-center justify-center gap-4">

        <div class="w-full h-36 sm:h-52 bg-stone-200/40 border border-stone-200 rounded-xl"/>
        
        <div class="-mt-20 sm:-mt-24 w-32 sm:w-40 aspect-square border-2 sm:border-4 border-white rounded-full">
            <img class="w-32 sm:w-40 aspect-square rounded-full" src={user.profilePicture} alt={`${user.name} profile image`}>
        </div>

        <div class="flex flex-col items-center">
            <span class="px-2 py-0.5 text-xs text-center text-orange-600 font-medium bg-orange-100 border border-orange-200 rounded-md">
                Early Adopter
            </span>
            <h1 class="mt-0.5 text-lg text-center text-gray-900 font-medium">{user.name}</h1>
            <h2 class="text-sm text-center text-gray-600">
                <!-- TODO: show the username where instead of the user email -->
                {user.email} 
            </h2>
            <p class="mt-0.5 text-xs text-center text-gray-600">
                {user.name} joined {format(user.createdAt, 'PP')}
            </p>
        </div>
    </section>
</AppLayout>
