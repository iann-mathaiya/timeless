---
import { auth } from "../lib/auth";
import AppLayout from "../layouts/AppLayout.astro";
import CreatePostForm from "@/components/create-post-form";

const authDetails = await auth.api.getSession({
    headers: Astro.request.headers,
});

if (!authDetails) {
    return Astro.redirect("/join");
}

const { user } = authDetails;
---

<AppLayout title="Create Post">
    <CreatePostForm client:load />
</AppLayout>
